/*
 * Copyright (c) 2022 Actions Semiconductor Co., Ltd
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * @file app ui define
 */

#ifndef _APP_UI_EVENT_H_
#define _APP_UI_EVENT_H_
#include <sys_event.h>
#include <msg_manager.h>
#include "btservice_api.h"

enum {
	NEED_INIT_BT,
	NO_NEED_INIT_BT,
};

enum APP_MESSAGE_TYPE {
	/* application defined message */
	MSG_BTMUSIC_APP_EVENT         = MSG_APP_MESSAGE_START,
	MSG_DEMO_APP_EVENT,
	MSG_OTA_APP_EVENT,
	MSG_USOUND_APP_EVENT,
	MSG_AUDIO_INPUT_APP_EVENT,
	MSG_SELFAPP_APP_EVENT,
	MSG_LEMUSIC_APP_EVENT,
	MSG_LCMUSIC_EVENT,
};

enum SELFAPP_COMMANDS {
	SELFAPP_CMD_CALLBACK,
	SELFAPP_CMD_ROLE_UPDATE,
	SELFAPP_CMD_LASTING_STEREO_MODE_UPDATE,
	SELFAPP_CMD_LEAUDIO_STATUS_UPDATE,
	SELFAPP_CMD_THREAD_TIMER_START,
};


enum APP_INPUT_MESSAGE_CMD{
	// msg cmd for main
	MSG_INPUT_NULL = 0,
	MSG_BT_PLAY_TWS_PAIR,
	MSG_BT_PLAY_DISCONNECT_TWS_PAIR,
	MSG_BT_PLAY_CLEAR_LIST,
	MSG_BT_SIRI_START,
	MSG_BT_SIRI_STOP,
	MSG_BT_CALL_LAST_NO,
	MSG_BT_HID_START,
	MSG_KEY_POWER_OFF,
	MSG_KEY_SWITCH_APP,
	MSG_BT_TWS_SWITCH_MODE,
	MSG_ENTER_PAIRING_MODE,
	MSG_RECORDER_START_STOP,
	MSG_GMA_RECORDER_START,
	MSG_ALARM_ENTRY_EXIT,
	MSG_AURACAST_ENTER,
	MSG_AURACAST_EXIT,
	MSG_ENTER_DEMO,
	MSG_FACTORY_DEFAULT,
	MSG_DEMO_SWITCH,
	MSG_PAUSE_PLAYER,
	MSG_RESUME_PLAYER,
	MSG_PLAYER_RESET,

	MSG_TRACE_MODE_SWITCH,

	MSG_APP_MESSAGE_MAX_INDEX,

	MSG_APP_INPUT_MESSAGE_CMD_START = 200,
};

enum SYS_APP_BTMGR_MESSAGE_CMD{
	// msg cmd for btmgr
	MSG_BT_POWEROFF_RESULT,
	MSG_BT_LEAUDIO_RESTART,
	// msg cmd for gfp
	MSG_BT_GFP_CONNECTED,
	MSG_BT_GFP_DISCONNECTED,
    MSG_BT_GFP_INITIAL_PAIRING,

	MSG_BLE_ADV_CONTROL, // 0 - off, 1 - on
};

enum APP_UI_VIEW_ID {
	MAIN_VIEW,
	BTMUSIC_VIEW,
	BTCALL_VIEW,
	AUXTWS_VIEW,
	LEA_RELAY_VIEW,
	LEAUDIO_VIEW,
	LEMUSIC_VIEW,
	AUDIO_INPUT_VIEW,
	OTA_VIEW,
	SOUNBAR_VIEW,
	USOUND_VIEW,
	DEMO_VIEW,
	BORADCAST_BR_VIEW,
	BORADCAST_LE_VIEW,
	BMS_UAC_VIEW,
	BMS_SPDIF_VIEW,
	BMR_VIEW,
	MCU_VIEW,
	CHARGER_VIEW,
	LCMUSIC_VIEW,

#ifdef CONFIG_BUILD_PROJECT_HM_DEMAND_CODE
	FG_APP_NAME_VIEW,
	CHARGE_APP_VIEW,
#endif
};

enum APP_UI_EVENT_ID {
	UI_EVENT_NONE = 0,
	UI_EVENT_POWER_ON,
	UI_EVENT_POWER_OFF,
	UI_EVENT_STANDBY,
	UI_EVENT_WAKE_UP,

	UI_EVENT_LOW_POWER,
	UI_EVENT_NO_POWER,
	UI_EVENT_CHARGE,
	UI_EVENT_CHARGE_OUT,
	UI_EVENT_POWER_FULL,

	UI_EVENT_ENTER_PAIRING,
	UI_EVENT_CLEAR_PAIRED_LIST,
	UI_EVENT_WAIT_CONNECTION,
	UI_EVENT_CONNECT_SUCCESS,
	UI_EVENT_SECOND_DEVICE_CONNECT_SUCCESS,
	UI_EVENT_BT_DISCONNECT,
	UI_EVENT_BT_UNLINKED,
	UI_EVENT_TWS_START_TEAM,
	UI_EVENT_TWS_TEAM_SUCCESS,
	UI_EVENT_TWS_DISCONNECTED,
	UI_EVENT_TWS_PAIR_FAILED,

	UI_EVENT_VOLUME_CHANGED,
	UI_EVENT_MIN_VOLUME,
	UI_EVENT_MAX_VOLUME,

	UI_EVENT_PLAY_START,
	UI_EVENT_PLAY_PAUSE,
	UI_EVENT_PLAY_PREVIOUS,
	UI_EVENT_PLAY_NEXT,

	UI_EVENT_BT_INCOMING,
	UI_EVENT_BT_OUTGOING,
	UI_EVENT_BT_START_CALL,
	UI_EVENT_BT_ONGOING,
	UI_EVENT_BT_HANG_UP,
	UI_EVENT_START_SIRI,
	UI_EVENT_STOP_SIRI,
	UI_EVENT_BT_CALLRING,

	UI_EVENT_MIC_MUTE,
	UI_EVENT_MIC_MUTE_OFF,
	UI_EVENT_TAKE_PICTURES,
	UI_EVENT_FACTORY_DEFAULT,

	UI_EVENT_ENTER_BTMUSIC,
	UI_EVENT_ENTER_LINEIN,
	UI_EVENT_ENTER_USOUND,
	UI_EVENT_ENTER_SPDIF_IN,
	UI_EVENT_ENTER_I2SRX_IN,
	UI_EVENT_ENTER_SDMPLAYER,
	UI_EVENT_ENTER_UMPLAYER,
	UI_EVENT_ENTER_NORMPLAYER,
	UI_EVENT_ENTER_SDPLAYBACK,
	UI_EVENT_ENTER_UPLAYBACK,
	UI_EVENT_ENTER_RECORD,
	UI_EVENT_ENTER_MIC_IN,
	UI_EVENT_ENTER_FM,
	UI_EVENT_ENTER_AUXTWS,
	UI_EVENT_ENTER_LEARELAY,
	UI_EVENT_ENTER_LEAUDIO,
	UI_EVENT_ENTER_LEMUSIC,
	UI_EVENT_ENTER_OTA,
	UI_EVENT_ENTER_DEMO,

	UI_EVENT_PLAY_ENTER_AURACAST_TTS,
	UI_EVENT_PLAY_EXIT_AURACAST_TTS,

	UI_EVENT_OTA_FINISHED_REBOOT,
#ifdef CONFIG_BUILD_PROJECT_HM_DEMAND_CODE
	UI_EVENT_PLAY_MUSIC_EFFECT_ON_TTS,
	UI_EVENT_PLAY_MUSIC_EFFECT_OFF_TTS,
	UI_EVENT_AUTO_POWER_OFF,
#endif
#ifdef CONFIG_WLT_MODIFY_BATTERY_DISPLAY
    UI_EVENT_SMART_CONTROL_VOLUME,
#endif
	UI_EVENT_CHARGING_WARNING,
	UI_EVENT_REMOVE_CHARGING_WARNING,
	UI_EVENT_MCU_FW_SUCESS,
	UI_EVENT_MCU_FW_FAIL,
	UI_EVENT_MCU_FW_UPDATED,

	UI_EVENT_FACTORY_AND_REBOOT,
	UI_EVENT_STEREO_GROUP_INDICATION,
	UI_EVENT_STEREO_GROUP_INDICATION_NO_FILTER,
	UI_EVENT_OTA_REQ_START
};


enum TWS_APP_EVENT_ID
{
    /***************************************************************************************
	 * 下面消息是TWS短消息，通过  TWS_SHORT_MSG_EVENT发?
	 *
	 * 例如?	 * bt_manager_tws_send_message(TWS_SHORT_MSG_EVENT, TWS_APP_EVENT_KEY_TONE_PLAY, NULL, 0)
     *
     **************************************************************************************/
    TWS_EVENT_SYSTEM_KEY_CTRL = TWS_EVENT_APP_MSG_BEGIN_ID,      // 系统控制
    TWS_EVENT_BT_MUSIC_KEY_CTRL,      // 蓝牙音乐控制
    TWS_EVENT_BT_CALL_KEY_CTRL,       // 蓝牙通话控制
	TWS_EVENT_KEY_CTRL_COMPLETE,	  // 按键控制完成

    TWS_EVENT_KEY_TONE_PLAY,          // 播放按键?
	TWS_EVENT_POWER_OFF,			  // 关机

	TWS_EVENT_IN_CHARGER_BOX_STATE,   // 是否在充电盒中状?
	TWS_EVENT_REMOTE_KEY_PROC_BEGIN,  // 对端按键处理开?	TWS_EVENT_REMOTE_KEY_PROC_END,	  // 对端按键处理结束
	TWS_EVENT_AVDTP_FILTER, 		  // AVDTP 数据过滤
	TWS_EVENT_BT_CALL_START_RING,	  // 开始来电响?	TWS_EVENT_BT_CALL_RING_NUM_BEGIN, // 开始播放来电号?	TWS_EVENT_BT_CALL_RING_NUM_END,   // 结束播放来电号码

    TWS_EVENT_DIAL_PHONE_NO,          // 拨打指定电话号码
    TWS_EVENT_WAIT_DIAL,              // 等待拨打电话
    TWS_EVENT_WAIT_VOICE_ASSIST,      // 等待启动 Siri 等语音助?
    TWS_EVENT_SET_VOICE_LANG,         // 设置语音语言
    TWS_EVENT_SYNC_LOW_LATENCY_MODE,  // 同步低延迟模?    TWS_EVENT_BT_MUSIC_PLAYER_ERR,    // 蓝牙音乐播放器错?    TWS_EVENT_OTA_CMD,                // TWS OTA命令
    TWS_EVENT_SYNC_PRIVMA_STATUS,     // 同步SPP/BLE协议连接状?    TWS_EVENT_SYNC_CHG_BOX_STATUS,    // 同步充电盒状?
    TWS_EVENT_SYNC_BT_MUSIC_DAE,      // 同步蓝牙音乐音效
    TWS_EVENT_SYNC_TRANSPARENCY_MODE, // 同步通透模式状?
    TWS_EVENT_AVDTP_UNFILTER_AFTER_BT_CALL,  // 蓝牙通话结束后取?AVDTP 数据过滤

    TWS_EVENT_BT_CALL_PRE_RING,       // 准备来电响铃
	TWS_EVENT_SYNC_STATUS_INFO, 	  //同步应用状态信?

    TWS_EVENT_AP_RECORD_STATUS,          //录音状?
    TWS_EVENT_BT_MUSIC_START,          //音乐起始播放时间
    TWS_EVENT_BT_CALL_STOP,           //通话停止播放时间
	TWS_EVENT_BT_BMR_KEY_CTRL,        //BMR 按键控制
    /***************************************************************************************
	 * 下面消息是TWS短消息，通过  TWS_LONG_MSG_EVENT发?
	 *
	 * 例如?	 * bt_manager_tws_send_message(TWS_LONG_MSG_EVENT, TWS_EVENT_TWS_OTA, data, len)
     *
     **************************************************************************************/
    /* 长数据事件消?     */
    TWS_EVENT_TWS_OTA = TWS_EVENT_APP_LONG_MSG_BEGIN_ID,  // TWS OTA大数据传?
    TWS_EVENT_APOTA_SYNC,  // 类recovery ota接口数据传输

	TWS_EVENT_SPP_TEST,  // SPP TEST

	TWS_EVENT_APP_SETTING_KEY_MAP,  // 同步手机应用设置下来的按键映射表

	TWS_EVENT_APP_ROLE_SWITCH,  // spp/ble role switch

    TWS_EVENT_ASET,  // aset sync dae/aec param
    TWS_EVENT_CONSUMER_EQ,  // sync consumer eq param
};

struct event_strmap_s {
	int8_t event;
	const char *str;
};

struct event_ui_map {
	uint8_t sys_event;
	uint8_t ui_event;
};

#ifdef CONFIG_TWS_UI_EVENT_SYNC
typedef struct
{
    u8_t  app_ver;
    u8_t  bt_music_vol;
    u8_t  bt_call_vol;
    u8_t  auxtws_vol;
} app_tws_sync_status_info_t;
#endif

#endif
